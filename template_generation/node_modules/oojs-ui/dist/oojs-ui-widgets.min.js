/*! OOUI v0.51.6 | http://oojs.mit-license.org */
!function(g){"use strict";g.ui.mixin.DraggableElement=function(t){t=t||{},this.index=null,this.$handle=t.$handle||this.$element,this.wasHandleUsed=null,this.$element.addClass("oo-ui-draggableElement").on({mousedown:this.onDragMouseDown.bind(this),dragstart:this.onDragStart.bind(this),dragover:this.onDragOver.bind(this),dragend:this.onDragEnd.bind(this),drop:this.onDrop.bind(this)}),this.$handle.addClass("oo-ui-draggableElement-handle"),this.toggleDraggable(void 0===t.draggable||!!t.draggable)},g.initClass(g.ui.mixin.DraggableElement),g.ui.mixin.DraggableElement.static.cancelButtonMouseDownEvents=!1,g.ui.mixin.DraggableElement.prototype.toggleDraggable=function(t){t=void 0!==t?!!t:!this.draggable,this.draggable!==t&&(this.draggable=t,this.$handle.toggleClass("oo-ui-draggableElement-undraggable",!this.draggable),this.$element.prop("draggable",this.draggable))},g.ui.mixin.DraggableElement.prototype.isDraggable=function(){return this.draggable},g.ui.mixin.DraggableElement.prototype.onDragMouseDown=function(t){this.isDraggable()&&(this.wasHandleUsed=this.$handle[0]===this.$element[0]||g.ui.contains(this.$handle[0],t.target,!0))},g.ui.mixin.DraggableElement.prototype.onDragStart=function(t){if(!this.wasHandleUsed||!this.isDraggable())return!1;t=t.originalEvent.dataTransfer;t.dropEffect="none",t.effectAllowed="move";try{t.setData("application-x/OOUI-draggable",this.getIndex())}catch(t){}if(!t.getData("text"))try{t.setData("text"," ")}catch(t){}return this.$element.addClass("oo-ui-draggableElement-clone"),setTimeout(()=>{this.$element.removeClass("oo-ui-draggableElement-clone").addClass("oo-ui-draggableElement-placeholder")}),this.emit("dragstart",this),!0},g.ui.mixin.DraggableElement.prototype.onDragEnd=function(){this.$element.removeClass("oo-ui-draggableElement-placeholder"),this.emit("dragend")},g.ui.mixin.DraggableElement.prototype.onDrop=function(t){t.preventDefault(),this.emit("drop",t)},g.ui.mixin.DraggableElement.prototype.onDragOver=function(t){t.preventDefault()},g.ui.mixin.DraggableElement.prototype.setIndex=function(t){this.index!==t&&(this.index=t,this.$element.data("index",t))},g.ui.mixin.DraggableElement.prototype.getIndex=function(){return this.index},g.ui.mixin.DraggableGroupElement=function(t){g.ui.mixin.GroupElement.call(this,t=t||{}),this.orientation=t.orientation||"vertical",this.dragItem=null,this.itemKeys={},this.dir=null,this.itemsOrder=null,this.draggable=void 0===t.draggable||!!t.draggable,this.aggregate({dragstart:"itemDragStart",dragend:"itemDragEnd",drop:"itemDrop"}),this.connect(this,{itemDragStart:"onItemDragStart",itemDrop:"onItemDropOrDragEnd",itemDragEnd:"onItemDropOrDragEnd"}),this.addItems(t.items||[]),this.$element.addClass("oo-ui-draggableGroupElement").toggleClass("oo-ui-draggableGroupElement-horizontal","horizontal"===this.orientation)},g.mixinClass(g.ui.mixin.DraggableGroupElement,g.ui.mixin.GroupElement),g.ui.mixin.DraggableGroupElement.prototype.toggleDraggable=function(t){t=void 0!==t?!!t:!this.draggable,this.draggable!==t&&(this.draggable=t,this.getItems().forEach(t=>{t.toggleDraggable(this.draggable)}),this.emit("draggable",this.draggable))},g.ui.mixin.DraggableGroupElement.prototype.isDraggable=function(){return this.draggable},g.ui.mixin.DraggableGroupElement.prototype.onItemDragStart=function(t){this.isDraggable()&&(this.itemsOrder=this.items.slice(),this.updateIndexes(),"horizontal"===this.orientation&&(this.dir=this.$element.css("direction")),this.setDragItem(t))},g.ui.mixin.DraggableGroupElement.prototype.updateIndexes=function(){for(let t=0,e=this.itemsOrder.length;t<e;t++)this.itemsOrder[t].setIndex(t)},g.ui.mixin.DraggableGroupElement.prototype.onItemDropOrDragEnd=function(){var t,e=this.getDragItem();return e&&(t=this.items.indexOf(e),(e=e.getIndex()+(e.getIndex()>t?1:0))!==t&&(this.reorder(this.getDragItem(),e),this.emit("reorder",this.getDragItem(),e)),this.updateIndexes()),this.unsetDragItem(),!1},g.ui.mixin.DraggableGroupElement.prototype.onDragOver=function(t){var e,i=this.getDragItem(),n=i.getIndex(),o=$(t.target).closest(".oo-ui-draggableElement").data("index");void 0!==o&&o!==n&&(0<(e=o+(n<o?1:0))?this.$group.children().eq(e-1).after(i.$element):this.$group.prepend(i.$element),this.itemsOrder.splice(o,0,this.itemsOrder.splice(n,1)[0]),this.updateIndexes(),this.emit("drag",i,e)),t.preventDefault()},g.ui.mixin.DraggableGroupElement.prototype.reorder=function(t,e){this.addItems([t],e)},g.ui.mixin.DraggableGroupElement.prototype.setDragItem=function(t){this.dragItem!==t&&(this.dragItem=t,this.$element.on("dragover",this.onDragOver.bind(this)),this.$element.addClass("oo-ui-draggableGroupElement-dragging"))},g.ui.mixin.DraggableGroupElement.prototype.unsetDragItem=function(){this.dragItem&&(this.dragItem=null,this.$element.off("dragover"),this.$element.removeClass("oo-ui-draggableGroupElement-dragging"))},g.ui.mixin.DraggableGroupElement.prototype.getDragItem=function(){return this.dragItem},g.ui.mixin.RequestManager=function(t){this.requestCache={},this.requestQuery=null,this.requestRequest=null,this.showPendingRequest=!!this.pushPending&&!1!==t.showPendingRequest},g.initClass(g.ui.mixin.RequestManager),g.ui.mixin.RequestManager.prototype.getRequestData=function(){const e=this.getRequestQuery(),i=$.Deferred();if(this.abortRequest(),Object.prototype.hasOwnProperty.call(this.requestCache,e))i.resolve(this.requestCache[e]);else{this.showPendingRequest&&this.pushPending(),this.requestQuery=e;const n=this.requestRequest=this.getRequest();n.always(()=>{this.showPendingRequest&&this.popPending()}).done(t=>{n===this.requestRequest&&(this.requestQuery=null,this.requestRequest=null,this.requestCache[e]=this.getRequestCacheDataFromResponse(t),i.resolve(this.requestCache[e]))}).fail(()=>{n===this.requestRequest&&(this.requestQuery=null,this.requestRequest=null,i.reject())})}return i.promise()},g.ui.mixin.RequestManager.prototype.abortRequest=function(){var t=this.requestRequest;t&&(this.requestRequest=null,this.requestQuery=null,t.abort())},g.ui.mixin.RequestManager.prototype.getRequestQuery=null,g.ui.mixin.RequestManager.prototype.getRequest=null,g.ui.mixin.RequestManager.prototype.getRequestCacheDataFromResponse=null,g.ui.mixin.LookupElement=function(t){t=Object.assign({highlightFirst:!0},t),g.ui.mixin.RequestManager.call(this,t),this.$overlay=(!0===t.$overlay?g.ui.getDefaultOverlay():t.$overlay)||this.$element,this.lookupMenu=new g.ui.MenuSelectWidget(Object.assign({widget:this,input:this,$floatableContainer:t.$container||this.$element},t.menu)),this.allowSuggestionsWhenEmpty=t.allowSuggestionsWhenEmpty||!1,this.lookupsDisabled=!1,this.lookupInputFocused=!1,this.lookupHighlightFirstItem=t.highlightFirst,this.showSuggestionsOnFocus=!1!==t.showSuggestionsOnFocus,this.$input.on({focus:this.onLookupInputFocus.bind(this),blur:this.onLookupInputBlur.bind(this),mousedown:this.onLookupInputMouseDown.bind(this)}),this.connect(this,{change:"onLookupInputChange"}),this.lookupMenu.connect(this,{toggle:"onLookupMenuToggle",choose:"onLookupMenuChoose"}),this.$input.attr({role:"combobox","aria-owns":this.lookupMenu.getElementId(),"aria-autocomplete":"list"}),this.$element.addClass("oo-ui-lookupElement"),this.lookupMenu.$element.addClass("oo-ui-lookupElement-menu"),this.$overlay.append(this.lookupMenu.$element)},g.mixinClass(g.ui.mixin.LookupElement,g.ui.mixin.RequestManager),g.ui.mixin.LookupElement.prototype.onLookupInputFocus=function(){this.lookupInputFocused=!0,this.showSuggestionsOnFocus&&this.populateLookupMenu()},g.ui.mixin.LookupElement.prototype.onLookupInputBlur=function(){this.closeLookupMenu(),this.lookupInputFocused=!1},g.ui.mixin.LookupElement.prototype.onLookupInputMouseDown=function(){this.lookupMenu.isVisible()||!this.lookupInputFocused&&this.showSuggestionsOnFocus||this.populateLookupMenu()},g.ui.mixin.LookupElement.prototype.onLookupInputChange=function(){this.lookupInputFocused&&this.populateLookupMenu()},g.ui.mixin.LookupElement.prototype.onLookupMenuToggle=function(t){t||(this.abortLookupRequest(),this.lookupMenu.clearItems())},g.ui.mixin.LookupElement.prototype.onLookupMenuChoose=function(t){this.setValue(t.getData())},g.ui.mixin.LookupElement.prototype.getLookupMenu=function(){return this.lookupMenu},g.ui.mixin.LookupElement.prototype.setLookupsDisabled=function(t){this.lookupsDisabled=!!t},g.ui.mixin.LookupElement.prototype.openLookupMenu=function(){return this.lookupMenu.isEmpty()||this.lookupMenu.toggle(!0),this},g.ui.mixin.LookupElement.prototype.closeLookupMenu=function(){return this.lookupMenu.toggle(!1),this.abortLookupRequest(),this.lookupMenu.clearItems(),this},g.ui.mixin.LookupElement.prototype.populateLookupMenu=function(){var t=this.getValue();if(!this.lookupsDisabled&&!this.isReadOnly())return this.allowSuggestionsWhenEmpty||""!==t?t!==this.lookupQuery&&this.getLookupMenuItems().done(t=>{this.lookupMenu.clearItems(),t.length?(this.lookupMenu.addItems(t).toggle(!0),this.initializeLookupMenuSelection()):this.lookupMenu.toggle(!1)}).fail(()=>{this.lookupMenu.clearItems(),this.lookupMenu.toggle(!1)}):this.closeLookupMenu(),this},g.ui.mixin.LookupElement.prototype.initializeLookupMenuSelection=function(){this.lookupHighlightFirstItem&&!this.lookupMenu.findSelectedItem()&&this.lookupMenu.highlightItem(this.lookupMenu.findFirstSelectableItem())},g.ui.mixin.LookupElement.prototype.getLookupMenuItems=function(){return this.getRequestData().then(t=>this.getLookupMenuOptionsFromData(t))},g.ui.mixin.LookupElement.prototype.abortLookupRequest=function(){this.abortRequest()},g.ui.mixin.LookupElement.prototype.getLookupRequest=null,g.ui.mixin.LookupElement.prototype.getLookupCacheDataFromResponse=null,g.ui.mixin.LookupElement.prototype.getLookupMenuOptionsFromData=null,g.ui.mixin.LookupElement.prototype.setReadOnly=function(t){return g.ui.TextInputWidget.prototype.setReadOnly.call(this,t),this.isReadOnly()&&this.lookupMenu&&this.closeLookupMenu(),this},g.ui.mixin.LookupElement.prototype.getRequestQuery=function(){return this.getValue()},g.ui.mixin.LookupElement.prototype.getRequest=function(){return this.getLookupRequest()},g.ui.mixin.LookupElement.prototype.getRequestCacheDataFromResponse=function(t){return this.getLookupCacheDataFromResponse(t)},g.ui.TabPanelLayout=function(t,e){g.isPlainObject(t)&&void 0===e&&(t=(e=t).name),e=Object.assign({scrollable:!0},e),g.ui.TabPanelLayout.super.call(this,e),this.name=t,this.label=e.label,this.tabItemConfig=e.tabItemConfig||{},this.tabItem=null,this.active=!1,this.$element.addClass("oo-ui-tabPanelLayout").attr("role","tabpanel")},g.inheritClass(g.ui.TabPanelLayout,g.ui.PanelLayout),g.ui.TabPanelLayout.prototype.getName=function(){return this.name},g.ui.TabPanelLayout.prototype.isActive=function(){return this.active},g.ui.TabPanelLayout.prototype.getTabItem=function(){return this.tabItem},g.ui.TabPanelLayout.prototype.getTabItemConfig=function(){return this.tabItemConfig},g.ui.TabPanelLayout.prototype.setTabItem=function(t){return this.tabItem=t||null,t&&this.setupTabItem(),this},g.ui.TabPanelLayout.prototype.setupTabItem=function(){return this.$element.attr("aria-labelledby",this.tabItem.getElementId()),this.tabItem.$element.attr("aria-controls",this.getElementId()),this.label&&this.tabItem.setLabel(this.label),this},g.ui.TabPanelLayout.prototype.setActive=function(t){(t=!!t)!==this.active&&(this.active=t,this.$element.toggleClass("oo-ui-tabPanelLayout-active",this.active),this.emit("active",this.active))},g.ui.PageLayout=function(t,e){g.isPlainObject(t)&&void 0===e&&(t=(e=t).name),e=Object.assign({scrollable:!0},e),g.ui.PageLayout.super.call(this,e),this.name=t,this.outlineItem=null,this.active=!1,this.$element.addClass("oo-ui-pageLayout")},g.inheritClass(g.ui.PageLayout,g.ui.PanelLayout),g.ui.PageLayout.prototype.getName=function(){return this.name},g.ui.PageLayout.prototype.isActive=function(){return this.active},g.ui.PageLayout.prototype.getOutlineItem=function(){return this.outlineItem},g.ui.PageLayout.prototype.setOutlineItem=function(t){return this.outlineItem=t||null,t&&this.setupOutlineItem(),this},g.ui.PageLayout.prototype.setupOutlineItem=function(){},g.ui.PageLayout.prototype.setActive=function(t){(t=!!t)!==this.active&&(this.active=t,this.$element.toggleClass("oo-ui-pageLayout-active",t),this.emit("active",this.active))},g.ui.StackLayout=function(t){t=Object.assign({scrollable:!(!t||!t.continuous)},t),g.ui.StackLayout.super.call(this,t),g.ui.mixin.GroupElement.call(this,Object.assign({$group:this.$element},t)),this.currentItem=null,this.setContinuous(!!t.continuous),this.hideUntilFound=!!t.hideUntilFound,this.$element.addClass("oo-ui-stackLayout"),this.addItems(t.items||[])},g.inheritClass(g.ui.StackLayout,g.ui.PanelLayout),g.mixinClass(g.ui.StackLayout,g.ui.mixin.GroupElement),g.ui.StackLayout.prototype.setContinuous=function(t){this.continuous=t,this.$element.toggleClass("oo-ui-stackLayout-continuous",!!t),this.updateHiddenState(this.items,this.currentItem)},g.ui.StackLayout.prototype.isContinuous=function(){return this.continuous},g.ui.StackLayout.prototype.getCurrentItem=function(){return this.currentItem},g.ui.StackLayout.prototype.unsetCurrentItem=function(){null!==this.currentItem&&(this.currentItem=null,this.emit("set",null))},g.ui.StackLayout.prototype.setHideUntilFound=function(t){this.hideUntilFound=t,this.updateHiddenState(this.items,this.currentItem)},g.ui.StackLayout.prototype.addItems=function(t,e){return t&&0!==t.length&&(this.updateHiddenState(t,this.currentItem),g.ui.mixin.GroupElement.prototype.addItems.call(this,t,e),this.currentItem||this.setItem(t[0])),this},g.ui.StackLayout.prototype.removeItems=function(e){var t=-1!==e.indexOf(this.currentItem);let i;if(t){let t=this.items.indexOf(this.currentItem);for(;(i=this.items[++t])&&-1!==e.indexOf(i););}return g.ui.mixin.GroupElement.prototype.removeItems.call(this,e),t&&(this.items.length?this.setItem(i||this.items[this.items.length-1]):this.unsetCurrentItem()),this},g.ui.StackLayout.prototype.clearItems=function(){return this.unsetCurrentItem(),g.ui.mixin.GroupElement.prototype.clearItems.call(this),this},g.ui.StackLayout.prototype.setItem=function(t){return t!==this.currentItem&&(this.updateHiddenState(this.items,t),-1!==this.items.indexOf(t)?(this.currentItem=t,this.emit("set",t)):this.unsetCurrentItem()),this},g.ui.StackLayout.prototype.resetScroll=function(){return this.isContinuous()?g.ui.StackLayout.super.prototype.resetScroll.call(this):(this.getItems().forEach(t=>{var e=t.$element.hasClass("oo-ui-element-hidden");t.$element.removeClass("oo-ui-element-hidden"),t.resetScroll(),e&&t.$element.addClass("oo-ui-element-hidden")}),this)},g.ui.StackLayout.prototype.updateHiddenState=function(t,i){this.isContinuous()?t.forEach(t=>{t.$element[0].removeAttribute("hidden"),t.$element.removeAttr("aria-hidden")}):(t.forEach(t=>{var e;i&&i===t||(e=!(t instanceof g.ui.TabPanelLayout&&t.getTabItem()&&t.getTabItem().isDisabled())&&this.hideUntilFound,t.$element[0].setAttribute("hidden",e?"until-found":"hidden"),t.$element.attr("aria-hidden","true"))}),i&&(i.$element[0].removeAttribute("hidden"),i.$element.removeAttr("aria-hidden")))},g.ui.MenuLayout=function(t){t=Object.assign({expanded:!0,showMenu:!0,menuPosition:"before"},t),g.ui.MenuLayout.super.call(this,t),this.menuPanel=null,this.contentPanel=null,this.expanded=!!t.expanded,this.$menu=$("<div>"),this.$content=$("<div>"),this.$menu.addClass("oo-ui-menuLayout-menu"),this.$content.addClass("oo-ui-menuLayout-content"),this.$element.addClass("oo-ui-menuLayout"),t.expanded?this.$element.addClass("oo-ui-menuLayout-expanded"):this.$element.addClass("oo-ui-menuLayout-static"),t.menuPanel&&this.setMenuPanel(t.menuPanel),t.contentPanel&&this.setContentPanel(t.contentPanel),this.setMenuPosition(t.menuPosition),this.toggleMenu(t.showMenu)},g.inheritClass(g.ui.MenuLayout,g.ui.Layout),g.ui.MenuLayout.prototype.toggleMenu=function(t){return t=void 0===t?!this.showMenu:!!t,this.showMenu!==t&&(this.showMenu=t,this.$element.toggleClass("oo-ui-menuLayout-showMenu",this.showMenu).toggleClass("oo-ui-menuLayout-hideMenu",!this.showMenu),this.$menu.attr("aria-hidden",this.showMenu?"false":"true")),this},g.ui.MenuLayout.prototype.isMenuVisible=function(){return this.showMenu},g.ui.MenuLayout.prototype.setMenuPosition=function(t){return-1===["top","bottom","before","after"].indexOf(t)&&(t="before"),this.$element.removeClass("oo-ui-menuLayout-"+this.menuPosition),this.menuPosition=t,"top"===this.menuPosition||"before"===this.menuPosition?this.$element.append(this.$menu,this.$content):this.$element.append(this.$content,this.$menu),this.$element.addClass("oo-ui-menuLayout-"+t),this},g.ui.MenuLayout.prototype.getMenuPosition=function(){return this.menuPosition},g.ui.MenuLayout.prototype.setMenuPanel=function(t){this.menuPanel=t,this.$menu.append(this.menuPanel.$element)},g.ui.MenuLayout.prototype.setContentPanel=function(t){this.contentPanel=t,this.$content.append(this.contentPanel.$element)},g.ui.MenuLayout.prototype.clearMenuPanel=function(){this.menuPanel=null,this.$menu.empty()},g.ui.MenuLayout.prototype.clearContentPanel=function(){this.contentPanel=null,this.$content.empty()},g.ui.MenuLayout.prototype.resetScroll=function(){return this.menuPanel&&this.menuPanel.resetScroll(),this.contentPanel&&this.contentPanel.resetScroll(),this},g.ui.BookletLayout=function(t){g.ui.BookletLayout.super.call(this,t=t||{}),this.currentPageName=null,this.pages={},this.ignoreFocus=!1,this.stackLayout=new g.ui.StackLayout({continuous:!!t.continuous,expanded:this.expanded}),this.setContentPanel(this.stackLayout),this.autoFocus=void 0===t.autoFocus||!!t.autoFocus,this.outlineVisible=!1,this.outlined=!!t.outlined,this.outlined&&(this.editable=!!t.editable,this.outlineControlsWidget=null,this.outlineSelectWidget=new g.ui.OutlineSelectWidget,this.outlinePanel=new g.ui.PanelLayout({expanded:this.expanded,scrollable:!0}),this.setMenuPanel(this.outlinePanel),this.outlineVisible=!0,this.editable)&&(this.outlineControlsWidget=new g.ui.OutlineControlsWidget(this.outlineSelectWidget)),this.toggleMenu(this.outlined),this.stackLayout.connect(this,{set:"onStackLayoutSet"}),this.outlined&&this.outlineSelectWidget.connect(this,{select:"onOutlineSelectWidgetSelect"}),this.autoFocus&&this.stackLayout.$element.on("focusin",this.onStackLayoutFocus.bind(this)),this.$element.addClass("oo-ui-bookletLayout"),this.stackLayout.$element.addClass("oo-ui-bookletLayout-stackLayout"),this.outlined&&(this.outlinePanel.$element.addClass("oo-ui-bookletLayout-outlinePanel").append(this.outlineSelectWidget.$element),this.editable)&&this.outlinePanel.$element.addClass("oo-ui-bookletLayout-outlinePanel-editable").append(this.outlineControlsWidget.$element)},g.inheritClass(g.ui.BookletLayout,g.ui.MenuLayout),g.ui.BookletLayout.prototype.onStackLayoutFocus=function(t){var e=$(t.target).closest(".oo-ui-pageLayout");for(const i in this.pages)if(this.pages[i].$element[0]===e[0]&&i!==this.currentPageName){this.setPage(i);break}},g.ui.BookletLayout.prototype.onStackLayoutSet=function(e){if(e){let t;t=this.stackLayout.isContinuous()&&!this.scrolling?e.scrollElementIntoView():$.Deferred().resolve(),!this.autoFocus||g.ui.isMobile()||this.scrolling||t.done(()=>{this.focus()})}},g.ui.BookletLayout.prototype.focus=function(t){var e=this.stackLayout.getItems();let i;!(i=void 0!==t&&e[t]?e[t]:this.stackLayout.getCurrentItem())&&this.outlined&&(this.selectFirstSelectablePage(),i=this.stackLayout.getCurrentItem()),i&&!g.ui.contains(i.$element[0],this.getElementDocument().activeElement,!0)&&i.focus()},g.ui.BookletLayout.prototype.focusFirstFocusable=function(){g.ui.findFocusable(this.stackLayout.$element).focus()},g.ui.BookletLayout.prototype.onOutlineSelectWidgetSelect=function(t){t&&this.setPage(t.getData())},g.ui.BookletLayout.prototype.isOutlined=function(){return this.outlined},g.ui.BookletLayout.prototype.isEditable=function(){return this.editable},g.ui.BookletLayout.prototype.isOutlineVisible=function(){return this.outlined&&this.outlineVisible},g.ui.BookletLayout.prototype.toggleOutline=function(t){return this.outlined&&(t=void 0===t?!this.outlineVisible:!!t,this.outlineVisible=t,this.toggleMenu(t),t)&&this.editable&&setTimeout(()=>{g.ui.Element.static.reconsiderScrollbars(this.outlinePanel.$element[0])},g.ui.theme.getDialogTransitionDuration()),this},g.ui.BookletLayout.prototype.findClosestPage=function(t){var e=this.stackLayout.getItems(),i=e.indexOf(t);if(-1===i)return null;var n=e[i+1],e=e[i-1];if(this.outlined){i=this.outlineSelectWidget.findItemFromData(t.getName()).getLevel();if(e&&i===this.outlineSelectWidget.findItemFromData(e.getName()).getLevel())return e;if(n&&i===this.outlineSelectWidget.findItemFromData(n.getName()).getLevel())return n}return e||n||null},g.ui.BookletLayout.prototype.getOutline=function(){return this.outlineSelectWidget},g.ui.BookletLayout.prototype.getOutlineControls=function(){return this.outlineControlsWidget},g.ui.BookletLayout.prototype.getPage=function(t){return this.pages[t]},g.ui.BookletLayout.prototype.getCurrentPage=function(){var t=this.getCurrentPageName();return t?this.getPage(t):void 0},g.ui.BookletLayout.prototype.getCurrentPageName=function(){return this.currentPageName},g.ui.BookletLayout.prototype.addPages=function(t,e){var i,n,o=this.stackLayout.getItems(),s=[],u=[];let a,l,h,r;for(a=0,l=t.length;a<l;a++)h=t[a],r=h.getName(),Object.prototype.hasOwnProperty.call(this.pages,r)&&(-1!==(i=o.indexOf(this.pages[r]))&&i+1<e&&e--,s.push(this.pages[r]));for(s.length&&this.removePages(s),a=0,l=t.length;a<l;a++)h=t[a],r=h.getName(),this.pages[h.getName()]=h,this.outlined&&(n=new g.ui.OutlineOptionWidget({data:r}),h.setOutlineItem(n),u.push(n));return this.outlined&&this.outlineSelectWidget.addItems(u,e),this.stackLayout.addItems(t,e),this.emit("add",t,e),this},g.ui.BookletLayout.prototype.removePages=function(i){var n=[];for(let t=0,e=i.length;t<e;t++){var o=i[t],s=o.getName();delete this.pages[s],this.outlined&&(n.push(this.outlineSelectWidget.findItemFromData(s)),o.setOutlineItem(null)),this.currentPageName===s&&(this.currentPageName=null)}return n.length&&this.outlineSelectWidget.removeItems(n),this.stackLayout.removeItems(i),this.emit("remove",i),this},g.ui.BookletLayout.prototype.clearPages=function(){var i=this.stackLayout.getItems();if(this.pages={},this.currentPageName=null,this.outlined){this.outlineSelectWidget.clearItems();for(let t=0,e=i.length;t<e;t++)i[t].setOutlineItem(null)}return this.stackLayout.clearItems(),this.emit("remove",i),this},g.ui.BookletLayout.prototype.setPage=function(e){var i=this.pages[e];if(i&&e!==this.currentPageName){var n,o=this.currentPageName?this.pages[this.currentPageName]:null;this.currentPageName=e,!this.outlined||(n=this.outlineSelectWidget.findSelectedItem())&&n.getData()===e||this.outlineSelectWidget.selectItemByData(e);let t;o&&(o.setActive(!1),this.autoFocus)&&!g.ui.isMobile()&&this.stackLayout.isContinuous()&&0!==g.ui.findFocusable(i.$element).length&&(t=o.$element.find(":focus")).length&&t[0].blur(),i.setActive(!0),this.stackLayout.setItem(i),!this.stackLayout.isContinuous()&&o&&(t=o.$element.find(":focus")).length&&t[0].blur(),this.emit("set",i)}},g.ui.BookletLayout.prototype.resetScroll=function(){return g.ui.BookletLayout.super.prototype.resetScroll.call(this),this.outlined&&this.stackLayout.isContinuous()&&this.outlineSelectWidget.findFirstSelectableItem()&&(this.scrolling=!0,this.outlineSelectWidget.selectItem(this.outlineSelectWidget.findFirstSelectableItem()),this.scrolling=!1),this},g.ui.BookletLayout.prototype.selectFirstSelectablePage=function(){return this.outlineSelectWidget.findSelectedItem()||this.outlineSelectWidget.selectItem(this.outlineSelectWidget.findFirstSelectableItem()),this},g.ui.IndexLayout=function(i){i=Object.assign({},i,{menuPosition:"top"}),g.ui.IndexLayout.super.call(this,i),this.currentTabPanelName=null,this.tabPanels=i.tabPanels||{},this.openMatchedPanels=void 0===i.openMatchedPanels||!!i.openMatchedPanels,this.ignoreFocus=!1,this.contentPanel&&this.contentPanel.setHideUntilFound(this.openMatchedPanels),this.stackLayout=this.contentPanel||new g.ui.StackLayout({continuous:!!i.continuous,expanded:this.expanded,hideUntilFound:this.openMatchedPanels}),this.setContentPanel(this.stackLayout),this.autoFocus=void 0===i.autoFocus||!!i.autoFocus,i.tabSelectWidget&&this.stackLayout.getItems().forEach((t,e)=>{t.getTabItem()||t.setTabItem(i.tabSelectWidget.items[e]||null)}),this.tabSelectWidget=i.tabSelectWidget||new g.ui.TabSelectWidget({framed:void 0===i.framed||i.framed}),this.tabPanel=this.menuPanel||new g.ui.PanelLayout({expanded:this.expanded}),this.setMenuPanel(this.tabPanel),this.toggleMenu(!0),this.stackLayout.connect(this,{set:"onStackLayoutSet"}),this.openMatchedPanels&&this.stackLayout.$element.on("beforematch",this.onStackLayoutBeforeMatch.bind(this)),this.tabSelectWidget.connect(this,{select:"onTabSelectWidgetSelect"}),this.autoFocus&&this.stackLayout.$element.on("focusin",this.onStackLayoutFocus.bind(this)),this.$element.addClass("oo-ui-indexLayout"),this.stackLayout.$element.addClass("oo-ui-indexLayout-stackLayout"),this.tabPanel.$element.addClass("oo-ui-indexLayout-tabPanel").append(this.tabSelectWidget.$element),this.selectFirstSelectableTabPanel()},g.inheritClass(g.ui.IndexLayout,g.ui.MenuLayout),g.ui.IndexLayout.prototype.onStackLayoutFocus=function(t){var e=$(t.target).closest(".oo-ui-tabPanelLayout");for(const i in this.tabPanels)if(this.tabPanels[i].$element[0]===e[0]&&i!==this.currentTabPanelName){this.setTabPanel(i);break}},g.ui.IndexLayout.prototype.onStackLayoutSet=function(t){t&&this.autoFocus&&!g.ui.isMobile()&&this.focus()},g.ui.IndexLayout.prototype.onStackLayoutBeforeMatch=function(e){let i;var t;this.stackLayout.getItems().some(t=>t.$element[0]===e.target&&(i=t,!0)),i&&(t=i.getTabItem())&&this.tabSelectWidget.selectItem(t)},g.ui.IndexLayout.prototype.focus=function(t){var e=this.stackLayout.getItems();let i;(i=void 0!==t&&e[t]?e[t]:this.stackLayout.getCurrentItem())||(this.selectFirstSelectableTabPanel(),i=this.stackLayout.getCurrentItem()),i&&!g.ui.contains(i.$element[0],this.getElementDocument().activeElement,!0)&&i.focus()},g.ui.IndexLayout.prototype.focusFirstFocusable=function(){g.ui.findFocusable(this.stackLayout.$element).focus()},g.ui.IndexLayout.prototype.onTabSelectWidgetSelect=function(t){t&&this.setTabPanel(t.getData())},g.ui.IndexLayout.prototype.getClosestTabPanel=function(t){var e,i=this.stackLayout.getItems(),n=i.indexOf(t);return-1===n?null:(e=i[n+1],i=i[n-1],n=this.tabSelectWidget.findItemFromData(t.getName()).getLevel(),i&&n===this.tabSelectWidget.findItemFromData(i.getName()).getLevel()?i:e&&n===this.tabSelectWidget.findItemFromData(e.getName()).getLevel()?e:i||e||null)},g.ui.IndexLayout.prototype.getTabs=function(){return this.tabSelectWidget},g.ui.IndexLayout.prototype.getTabPanel=function(t){return this.tabPanels[t]},g.ui.IndexLayout.prototype.getCurrentTabPanel=function(){var t=this.getCurrentTabPanelName();return t?this.getTabPanel(t):void 0},g.ui.IndexLayout.prototype.getCurrentTabPanelName=function(){return this.currentTabPanelName},g.ui.IndexLayout.prototype.addTabPanels=function(t,e){let i,n,o,s,u,a;var l=this.stackLayout.getItems(),h=[],r=[];for(i=0,n=t.length;i<n;i++)s=t[i],o=s.getName(),Object.prototype.hasOwnProperty.call(this.tabPanels,o)&&(-1!==(a=l.indexOf(this.tabPanels[o]))&&a+1<e&&e--,h.push(this.tabPanels[o]));for(h.length&&this.removeTabPanels(h),i=0,n=t.length;i<n;i++)s=t[i],o=s.getName(),this.tabPanels[o]=s,u=new g.ui.TabOptionWidget(Object.assign({data:o},s.getTabItemConfig())),s.setTabItem(u),r.push(u);return r.length&&(this.tabSelectWidget.addItems(r,e),this.selectFirstSelectableTabPanel()),this.stackLayout.addItems(t,e),this.emit("add",t,e),this},g.ui.IndexLayout.prototype.removeTabPanels=function(t){let e,i,n,o;var s=[];for(e=0,i=t.length;e<i;e++)n=(o=t[e]).getName(),delete this.tabPanels[n],s.push(this.tabSelectWidget.findItemFromData(n)),o.setTabItem(null);return s.length&&(this.tabSelectWidget.removeItems(s),this.selectFirstSelectableTabPanel()),this.stackLayout.removeItems(t),this.emit("remove",t),this},g.ui.IndexLayout.prototype.clearTabPanels=function(){let t,e;var i=this.stackLayout.getItems();for(this.tabPanels={},this.currentTabPanelName=null,this.tabSelectWidget.clearItems(),t=0,e=i.length;t<e;t++)i[t].setTabItem(null);return this.stackLayout.clearItems(),this.emit("remove",i),this},g.ui.IndexLayout.prototype.setTabPanel=function(t){let e,i,n,o;t!==this.currentTabPanelName&&(o=this.getTabPanel(t),n=this.getCurrentTabPanel(),(e=this.tabSelectWidget.findSelectedItem())&&e.getData()===t||this.tabSelectWidget.selectItemByData(t),o)&&(n&&(n.setActive(!1),this.autoFocus)&&!g.ui.isMobile()&&this.stackLayout.isContinuous()&&0!==g.ui.findFocusable(o.$element).length&&(i=n.$element.find(":focus")).length&&i[0].blur(),this.currentTabPanelName=t,o.setActive(!0),this.stackLayout.setItem(o),!this.stackLayout.isContinuous()&&n&&(i=n.$element.find(":focus")).length&&i[0].blur(),this.emit("set",o))},g.ui.IndexLayout.prototype.selectFirstSelectableTabPanel=function(){return this.tabSelectWidget.findSelectedItem()||this.tabSelectWidget.selectItem(this.tabSelectWidget.findFirstSelectableItem()),this},g.ui.CopyTextLayout=function(t){var e=(t=t||{}).multiline?g.ui.MultilineTextInputWidget:g.ui.TextInputWidget;this.textInput=new e(Object.assign({value:t.copyText,readOnly:!0},t.textInput)),this.button=new g.ui.ButtonWidget(Object.assign({label:g.ui.msg("ooui-copytextlayout-copy"),icon:"copy"},t.button)),g.ui.CopyTextLayout.super.call(this,this.textInput,this.button,t),t.multiline&&(this.$input.removeClass("oo-ui-actionFieldLayout-input"),this.$button.removeClass("oo-ui-actionFieldLayout-button").addClass("oo-ui-copyTextLayout-multiline-button")),this.button.connect(this,{click:"onButtonClick"}),this.textInput.$input.on("focus",this.onInputFocus.bind(this)),this.$element.addClass("oo-ui-copyTextLayout")},g.inheritClass(g.ui.CopyTextLayout,g.ui.ActionFieldLayout),g.ui.CopyTextLayout.prototype.onButtonClick=function(){let e;this.selectText();try{e=document.execCommand("copy")}catch(t){e=!1}this.emit("copy",e)},g.ui.CopyTextLayout.prototype.onInputFocus=function(){this.selecting||this.selectText()},g.ui.CopyTextLayout.prototype.selectText=function(){var t=this.textInput.$input[0],e=t.scrollTop,i=t.scrollLeft;this.selecting=!0,this.textInput.select(),this.selecting=!1,t.scrollTop=e,t.scrollLeft=i},g.ui.ToggleButtonWidget=function(t){g.ui.ToggleButtonWidget.super.call(this,t=t||{}),g.ui.mixin.ButtonElement.call(this,Object.assign({active:this.active},t)),g.ui.mixin.IconElement.call(this,t),g.ui.mixin.IndicatorElement.call(this,t),g.ui.mixin.LabelElement.call(this,t),g.ui.mixin.FlaggedElement.call(this,t),g.ui.mixin.TabIndexedElement.call(this,Object.assign({$tabIndexed:this.$button},t)),this.connect(this,{click:"onAction"}),this.$button.append(this.$icon,this.$label,this.$indicator),this.$element.addClass("oo-ui-toggleButtonWidget").append(this.$button),this.setTitledElement(this.$button)},g.inheritClass(g.ui.ToggleButtonWidget,g.ui.ToggleWidget),g.mixinClass(g.ui.ToggleButtonWidget,g.ui.mixin.ButtonElement),g.mixinClass(g.ui.ToggleButtonWidget,g.ui.mixin.IconElement),g.mixinClass(g.ui.ToggleButtonWidget,g.ui.mixin.IndicatorElement),g.mixinClass(g.ui.ToggleButtonWidget,g.ui.mixin.LabelElement),g.mixinClass(g.ui.ToggleButtonWidget,g.ui.mixin.FlaggedElement),g.mixinClass(g.ui.ToggleButtonWidget,g.ui.mixin.TabIndexedElement),g.ui.ToggleButtonWidget.static.tagName="span",g.ui.ToggleButtonWidget.prototype.onAction=function(){this.setValue(!this.value)},g.ui.ToggleButtonWidget.prototype.setValue=function(t){return(t=!!t)!==this.value&&(this.$button&&this.$button.attr("aria-pressed",t.toString()),this.setActive(t)),g.ui.ToggleButtonWidget.super.prototype.setValue.call(this,t),this},g.ui.ToggleButtonWidget.prototype.setButtonElement=function(t){this.$button&&this.$button.removeAttr("aria-pressed"),g.ui.mixin.ButtonElement.prototype.setButtonElement.call(this,t),this.$button.attr("aria-pressed",this.value.toString())},g.ui.OutlineControlsWidget=function(t,e){g.isPlainObject(t)&&void 0===e&&(t=(e=t).outline),g.ui.OutlineControlsWidget.super.call(this,e=e||{}),g.ui.mixin.GroupElement.call(this,e),this.outline=t,this.$movers=$("<div>"),this.upButton=new g.ui.ButtonWidget({framed:!1,icon:"upTriangle",title:g.ui.msg("ooui-outline-control-move-up")}),this.downButton=new g.ui.ButtonWidget({framed:!1,icon:"downTriangle",title:g.ui.msg("ooui-outline-control-move-down")}),this.removeButton=new g.ui.ButtonWidget({framed:!1,icon:"trash",title:g.ui.msg("ooui-outline-control-remove")}),this.abilities={move:!0,remove:!0},t.connect(this,{select:"onOutlineChange",add:"onOutlineChange",remove:"onOutlineChange"}),this.upButton.connect(this,{click:["emit","move",-1]}),this.downButton.connect(this,{click:["emit","move",1]}),this.removeButton.connect(this,{click:["emit","remove"]}),this.$element.addClass("oo-ui-outlineControlsWidget"),this.$group.addClass("oo-ui-outlineControlsWidget-items"),this.$movers.addClass("oo-ui-outlineControlsWidget-movers").append(this.upButton.$element,this.downButton.$element,this.removeButton.$element),this.$element.append(this.$icon,this.$group,this.$movers),this.setAbilities(e.abilities||{})},g.inheritClass(g.ui.OutlineControlsWidget,g.ui.Widget),g.mixinClass(g.ui.OutlineControlsWidget,g.ui.mixin.GroupElement),g.ui.OutlineControlsWidget.prototype.setAbilities=function(t){for(const e in this.abilities)void 0!==t[e]&&(this.abilities[e]=!!t[e]);this.onOutlineChange()},g.ui.OutlineControlsWidget.prototype.onOutlineChange=function(){var e=this.outline.getItems(),t=this.outline.findSelectedItem(),i=this.abilities.move&&t&&t.isMovable(),n=this.abilities.remove&&t&&t.isRemovable();let o,s;if(i){let t=-1;for(var u=e.length;++t<u;)if(e[t].isMovable()){o=e[t];break}for(t=u;t--;)if(e[t].isMovable()){s=e[t];break}}this.upButton.setDisabled(!i||t===o),this.downButton.setDisabled(!i||t===s),this.removeButton.setDisabled(!n)},g.ui.OutlineOptionWidget=function(t){g.ui.OutlineOptionWidget.super.call(this,t=t||{}),this.movable=!!t.movable,this.removable=!!t.removable,this.$element.addClass("oo-ui-outlineOptionWidget"),this.setLevel(t.level)},g.inheritClass(g.ui.OutlineOptionWidget,g.ui.DecoratedOptionWidget),g.ui.OutlineOptionWidget.static.highlightable=!0,g.ui.OutlineOptionWidget.static.scrollIntoViewOnSelect=!0,g.ui.OutlineOptionWidget.static.levelClass="oo-ui-outlineOptionWidget-level-",g.ui.OutlineOptionWidget.static.levels=3,g.ui.OutlineOptionWidget.prototype.isMovable=function(){return this.movable},g.ui.OutlineOptionWidget.prototype.isRemovable=function(){return this.removable},g.ui.OutlineOptionWidget.prototype.getLevel=function(){return this.level},g.ui.OutlineOptionWidget.prototype.setMovable=function(t){return this.movable=!!t,this.updateThemeClasses(),this},g.ui.OutlineOptionWidget.prototype.setRemovable=function(t){return this.removable=!!t,this.updateThemeClasses(),this},g.ui.OutlineOptionWidget.prototype.setLevel=function(t){var e,i;return this.level!==(t=t||0)&&(e=this.constructor.static.levels,i=this.constructor.static.levelClass,void 0!==this.level&&this.$element.removeClass(i+this.level),this.level=0<t?Math.min(t,e-1):0,this.$element.addClass(i+this.level),this.updateThemeClasses()),this},g.ui.OutlineSelectWidget=function(t){g.ui.OutlineSelectWidget.super.call(this,t),g.ui.mixin.TabIndexedElement.call(this,t),this.$element.on({focus:this.bindDocumentKeyDownListener.bind(this),blur:this.unbindDocumentKeyDownListener.bind(this)}),this.$element.addClass("oo-ui-outlineSelectWidget")},g.inheritClass(g.ui.OutlineSelectWidget,g.ui.SelectWidget),g.mixinClass(g.ui.OutlineSelectWidget,g.ui.mixin.TabIndexedElement),g.ui.ButtonOptionWidget=function(t){g.ui.ButtonOptionWidget.super.call(this,t=t||{}),g.ui.mixin.ButtonElement.call(this,t),g.ui.mixin.IconElement.call(this,t),g.ui.mixin.IndicatorElement.call(this,t),this.$element.addClass("oo-ui-buttonOptionWidget"),this.$button.append(this.$icon,this.$label,this.$indicator),this.$element.append(this.$button),this.setTitledElement(this.$button)},g.inheritClass(g.ui.ButtonOptionWidget,g.ui.OptionWidget),g.mixinClass(g.ui.ButtonOptionWidget,g.ui.mixin.ButtonElement),g.mixinClass(g.ui.ButtonOptionWidget,g.ui.mixin.IconElement),g.mixinClass(g.ui.ButtonOptionWidget,g.ui.mixin.IndicatorElement),g.ui.ButtonOptionWidget.static.cancelButtonMouseDownEvents=!1,g.ui.ButtonOptionWidget.static.highlightable=!1,g.ui.ButtonOptionWidget.prototype.setSelected=function(t){return g.ui.ButtonOptionWidget.super.prototype.setSelected.call(this,t),this.constructor.static.selectable&&this.setActive(t),this},g.ui.ButtonSelectWidget=function(t){g.ui.ButtonSelectWidget.super.call(this,t),g.ui.mixin.TabIndexedElement.call(this,t),this.$element.on({focus:this.bindDocumentKeyDownListener.bind(this),blur:this.unbindDocumentKeyDownListener.bind(this)}),this.$element.addClass("oo-ui-buttonSelectWidget")},g.inheritClass(g.ui.ButtonSelectWidget,g.ui.SelectWidget),g.mixinClass(g.ui.ButtonSelectWidget,g.ui.mixin.TabIndexedElement),g.ui.TabOptionWidget=function(t){(t=t||{}).href&&(t=Object.assign({$label:$("<a>").attr("href",t.href)},t)),g.ui.TabOptionWidget.super.call(this,t),this.$element.addClass("oo-ui-tabOptionWidget").attr("role","tab")},g.inheritClass(g.ui.TabOptionWidget,g.ui.OptionWidget),g.ui.TabOptionWidget.static.highlightable=!1,g.ui.TabOptionWidget.static.scrollIntoViewOnSelect=!0,g.ui.TabOptionWidget.prototype.scrollElementIntoView=function(t){var e;return g.ui.isMobile()&&this.getElementGroup()?(e=Math.max((this.getElementGroup().$element[0].clientWidth-this.$element[0].clientWidth)/2,0),g.ui.TabOptionWidget.super.prototype.scrollElementIntoView.call(this,Object.assign({padding:{left:e,right:e}},t))):g.ui.TabOptionWidget.super.prototype.scrollElementIntoView.call(this)},g.ui.TabSelectWidget=function(t){g.ui.TabSelectWidget.super.call(this,t),g.ui.mixin.TabIndexedElement.call(this,t),this.$element.on({focus:this.bindDocumentKeyDownListener.bind(this),blur:this.unbindDocumentKeyDownListener.bind(this)}),this.$element.addClass("oo-ui-tabSelectWidget").attr("role","tablist"),this.toggleFramed(void 0===t.framed||t.framed),g.ui.isMobile()&&this.$element.addClass("oo-ui-tabSelectWidget-mobile")},g.inheritClass(g.ui.TabSelectWidget,g.ui.SelectWidget),g.mixinClass(g.ui.TabSelectWidget,g.ui.mixin.TabIndexedElement),g.ui.TabSelectWidget.prototype.isFramed=function(){return this.framed},g.ui.TabSelectWidget.prototype.toggleFramed=function(t){return(t=void 0===t?!this.framed:!!t)!==this.framed&&(this.framed=t,this.$element.toggleClass("oo-ui-tabSelectWidget-frameless",!t).toggleClass("oo-ui-tabSelectWidget-framed",t)),this},g.ui.ButtonMenuSelectWidget=function(t){g.ui.ButtonMenuSelectWidget.super.call(this,t=t||{}),this.$overlay=(!0===t.$overlay?g.ui.getDefaultOverlay():t.$overlay)||this.$element;var e=t.menuClass||g.ui.MenuSelectWidget;this.clearOnSelect=!1!==t.clearOnSelect,this.menu=new e(Object.assign({widget:this,$floatableContainer:this.$element,spacing:4},t.menu)),this.connect(this,{click:"onButtonMenuClick"}),this.getMenu().connect(this,{select:"onMenuSelect",toggle:"onMenuToggle"}),this.$button.attr({"aria-expanded":"false","aria-haspopup":"true","aria-owns":this.menu.getElementId()}),this.$element.addClass("oo-ui-buttonMenuSelectWidget"),this.$overlay.append(this.menu.$element)},g.inheritClass(g.ui.ButtonMenuSelectWidget,g.ui.ButtonWidget),g.ui.ButtonMenuSelectWidget.prototype.getMenu=function(){return this.menu},g.ui.ButtonMenuSelectWidget.prototype.onMenuSelect=function(t){this.clearOnSelect&&t&&this.getMenu().selectItem()},g.ui.ButtonMenuSelectWidget.prototype.onMenuToggle=function(t){this.$element.toggleClass("oo-ui-buttonElement-pressed",t)},g.ui.ButtonMenuSelectWidget.prototype.onButtonMenuClick=function(){this.menu.toggle()},g.ui.TagItemWidget=function(t){g.ui.TagItemWidget.super.call(this,t=t||{}),g.ui.mixin.ItemWidget.call(this),g.ui.mixin.LabelElement.call(this,t),g.ui.mixin.FlaggedElement.call(this,t),g.ui.mixin.TabIndexedElement.call(this,t),g.ui.mixin.DraggableElement.call(this,t),this.valid=void 0===t.valid||!!t.valid,this.fixed=!!t.fixed,this.closeButton=new g.ui.ButtonWidget({framed:!1,icon:"close",tabIndex:-1,title:g.ui.msg("ooui-item-remove")}),this.closeButton.setDisabled(this.isDisabled()),this.closeButton.connect(this,{click:"remove"}),this.$element.on("click",this.select.bind(this)).on("keydown",this.onKeyDown.bind(this)).on("mousedown",t=>{t.stopPropagation()}),this.$element.addClass("oo-ui-tagItemWidget").append(this.$label,this.closeButton.$element)},g.inheritClass(g.ui.TagItemWidget,g.ui.Widget),g.mixinClass(g.ui.TagItemWidget,g.ui.mixin.ItemWidget),g.mixinClass(g.ui.TagItemWidget,g.ui.mixin.LabelElement),g.mixinClass(g.ui.TagItemWidget,g.ui.mixin.FlaggedElement),g.mixinClass(g.ui.TagItemWidget,g.ui.mixin.TabIndexedElement),g.mixinClass(g.ui.TagItemWidget,g.ui.mixin.DraggableElement),g.ui.TagItemWidget.prototype.setFixed=function(t){return t=void 0===t?!this.fixed:!!t,this.fixed!==t&&(this.fixed=t,this.closeButton&&this.closeButton.toggle(!this.fixed),this.fixed||!this.elementGroup||this.elementGroup.isDraggable()||this.toggleDraggable(!this.fixed),this.$element.toggleClass("oo-ui-tagItemWidget-fixed",this.fixed),this.emit("fixed",this.isFixed())),this},g.ui.TagItemWidget.prototype.isFixed=function(){return this.fixed},g.ui.TagItemWidget.prototype.remove=function(){this.isDisabled()||this.isFixed()||this.emit("remove")},g.ui.TagItemWidget.prototype.onKeyDown=function(e){if(!(this.isDisabled()||this.isFixed()||e.keyCode!==g.ui.Keys.BACKSPACE&&e.keyCode!==g.ui.Keys.DELETE))return this.remove(),!1;if(e.keyCode===g.ui.Keys.ENTER)return this.select(),!1;if(e.keyCode===g.ui.Keys.LEFT||e.keyCode===g.ui.Keys.RIGHT){let t;return t="rtl"===g.ui.Element.static.getDir(this.$element)?{left:"forwards",right:"backwards"}:{left:"backwards",right:"forwards"},this.emit("navigate",e.keyCode===g.ui.Keys.LEFT?t.left:t.right),!1}},g.ui.TagItemWidget.prototype.select=function(){this.isDisabled()||this.emit("select")},g.ui.TagItemWidget.prototype.toggleValid=function(t){t=void 0===t?!this.valid:!!t,this.valid!==t&&(this.valid=t,this.setFlags({invalid:!this.valid}),this.emit("valid",this.valid))},g.ui.TagItemWidget.prototype.isValid=function(){return this.valid},g.ui.TagMultiselectWidget=function(t){var e,i=window.requestAnimationFrame||setTimeout,n=$("<span>").addClass("oo-ui-tagMultiselectWidget-focusTrap");g.ui.TagMultiselectWidget.super.call(this,t=t||{}),g.ui.mixin.GroupWidget.call(this,t),g.ui.mixin.IndicatorElement.call(this,t),g.ui.mixin.IconElement.call(this,t),g.ui.mixin.TabIndexedElement.call(this,t),g.ui.mixin.FlaggedElement.call(this,t),g.ui.mixin.DraggableGroupElement.call(this,t),g.ui.mixin.TitledElement.call(this,t),this.inputPosition=-1<this.constructor.static.allowedInputPositions.indexOf(t.inputPosition)?t.inputPosition:"inline",this.allowEditTags=void 0===t.allowEditTags||!!t.allowEditTags,this.allowArbitrary=!!t.allowArbitrary,this.allowDuplicates=!!t.allowDuplicates,this.allowedValues=t.allowedValues||[],this.allowDisplayInvalidTags=t.allowDisplayInvalidTags,this.hasInput="none"!==this.inputPosition,this.tagLimit=t.tagLimit,this.allowReordering=void 0===t.allowReordering||!!t.allowReordering,this.height=null,this.valid=!0,this.toggleDraggable(this.allowReordering),this.$content=$("<div>").addClass("oo-ui-tagMultiselectWidget-content"),this.$handle=$("<div>").addClass("oo-ui-tagMultiselectWidget-handle").append(this.$indicator,this.$icon,this.$content.append(this.$group.addClass("oo-ui-tagMultiselectWidget-group"))),this.aggregate({remove:"itemRemove",navigate:"itemNavigate",select:"itemSelect",fixed:"itemFixed"}),this.connect(this,{itemRemove:"onTagRemove",itemSelect:"onTagSelect",itemFixed:"onTagFixed",itemNavigate:"onTagNavigate",change:"onChangeTags"}),this.$handle.on({mousedown:this.onMouseDown.bind(this)}),this.$element.addClass("oo-ui-tagMultiselectWidget").append(this.$handle),this.hasInput?(t.inputWidget?this.input=t.inputWidget:this.input=new g.ui.TextInputWidget(Object.assign({placeholder:t.placeholder,classes:["oo-ui-tagMultiselectWidget-input"]},t.input)),this.input.setDisabled(this.isDisabled()),e={focus:this.onInputFocus.bind(this),blur:this.onInputBlur.bind(this),"propertychange change click mouseup keydown keyup input cut paste select focus":g.ui.debounce(this.updateInputSize.bind(this)),keydown:this.onInputKeyDown.bind(this),keypress:this.onInputKeyPress.bind(this)},this.input.$input.on(e),this.inputPlaceholder=this.input.$input.attr("placeholder"),"outline"===this.inputPosition?(this.input.$element.css("max-width","inherit"),this.$element.addClass("oo-ui-tagMultiselectWidget-outlined").append(this.input.$element)):(this.$element.addClass("oo-ui-tagMultiselectWidget-inlined"),this.$group.append(this.input.$input))):this.$content.append(n),this.setTabIndexedElement(this.hasInput?this.input.$input:n),t.selected&&this.setValue(t.selected),i(()=>{this.hasInput&&this.updateInputSize()})},g.inheritClass(g.ui.TagMultiselectWidget,g.ui.Widget),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.GroupWidget),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.DraggableGroupElement),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.IndicatorElement),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.IconElement),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.TabIndexedElement),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.FlaggedElement),g.mixinClass(g.ui.TagMultiselectWidget,g.ui.mixin.TitledElement),g.ui.TagMultiselectWidget.static.allowedInputPositions=["inline","outline","none"],g.ui.TagMultiselectWidget.prototype.onMouseDown=function(t){if(!(this.isDisabled()||this.hasInput&&t.target===this.input.$input[0]||t.which!==g.ui.MouseButtons.LEFT))return this.focus(),!1},g.ui.TagMultiselectWidget.prototype.onInputKeyPress=function(e){var i=e.metaKey||e.ctrlKey;if(!this.isDisabled()){let t;return e.which===g.ui.Keys.ENTER&&(t=this.doInputEnter(e,i)),this.updateInputSize(),t}},g.ui.TagMultiselectWidget.prototype.onInputKeyDown=function(e){var i=e.metaKey||e.ctrlKey,n=t=>{var e=this.input.getRange(),i=this.hasInput&&this.input.getValue();return!("forwards"===t&&e.to>i.length-1||"backwards"===t&&e.from<=0)};if(!this.isDisabled()){if(e.keyCode===g.ui.Keys.BACKSPACE)return this.doInputBackspace(e,i);if(e.keyCode===g.ui.Keys.ESCAPE)return this.doInputEscape(e);if(e.keyCode===g.ui.Keys.LEFT||e.keyCode===g.ui.Keys.RIGHT){let t;t="rtl"===g.ui.Element.static.getDir(this.$element)?{left:"forwards",right:"backwards"}:{left:"backwards",right:"forwards"};var o=e.keyCode===g.ui.Keys.LEFT?t.left:t.right;if(!this.hasInput||!n(o))return this.doInputArrow(e,o,i)}}},g.ui.TagMultiselectWidget.prototype.onInputFocus=function(){this.$element.addClass("oo-ui-tagMultiselectWidget-focus"),this.toggleValid(!0)},g.ui.TagMultiselectWidget.prototype.onInputBlur=function(){this.changing||(this.$element.removeClass("oo-ui-tagMultiselectWidget-focus"),this.addTagFromInput(),this.toggleValid(this.checkValidity()&&(!this.hasInput||!this.input.getValue())))},g.ui.TagMultiselectWidget.prototype.doInputEnter=function(){return this.addTagFromInput(),!1},g.ui.TagMultiselectWidget.prototype.doInputBackspace=function(t,e){if("inline"===this.inputPosition&&""===this.input.getValue()&&!this.isEmpty()){var i=this.getItems(),i=i[i.length-1];if(!i.isDisabled()&&!i.isFixed()&&(this.removeItems([i]),!e)){let t;"string"==typeof i.getLabel()?t=i.getLabel():i.getLabel()instanceof $&&(t=i.getLabel().text()),this.input.setValue(t)}return!1}},g.ui.TagMultiselectWidget.prototype.doInputEscape=function(){this.clearInput()},g.ui.TagMultiselectWidget.prototype.doInputArrow=function(t,e){"inline"!==this.inputPosition||this.isEmpty()||"backwards"!==e||this.getPreviousItem().focus()},g.ui.TagMultiselectWidget.prototype.onTagSelect=function(t){this.hasInput&&this.allowEditTags&&!t.isFixed()&&(this.input.getValue()&&this.addTagFromInput(),this.input.setValue(t.getLabel()),this.removeItems([t]),this.focus())},g.ui.TagMultiselectWidget.prototype.onTagFixed=function(t){var e=this.getItems();let i;for(i=0;i<e.length&&(e[i]===t||e[i].isFixed());i++);this.addItems([t],i)},g.ui.TagMultiselectWidget.prototype.onChangeTags=function(){var t,e=this.isUnderLimit();this.changing=!0,this.toggleValid(this.checkValidity()),this.hasInput&&(this.updateInputSize(),e||this.input.setValue(""),"outline"===this.inputPosition?(this.input.$input.attr("placeholder",e?this.inputPlaceholder:""),this.input.setDisabled(!e)):(t=document.activeElement===this.input.$input[0],this.$group.append(this.input.$input),this.input.$input.toggleClass("oo-ui-element-hidden",!e),t&&e&&this.input.focus())),this.updateIfHeightChanged(),this.changing=!1},g.ui.TagMultiselectWidget.prototype.setDisabled=function(e){g.ui.TagMultiselectWidget.super.prototype.setDisabled.call(this,e),this.hasInput&&this.input&&(e||this.updateInputSize(),this.input.setDisabled(!!e||!this.isUnderLimit())),this.items&&this.getItems().forEach(t=>{t.setDisabled(!!e)})},g.ui.TagMultiselectWidget.prototype.onTagRemove=function(t){this.removeTagByData(t.getData())},g.ui.TagMultiselectWidget.prototype.onTagNavigate=function(t,e){var i=this.getItems()[0];"forwards"===e?this.getNextItem(t).focus():"inline"!==!this.inputPosition&&t===i||this.getPreviousItem(t).focus()},g.ui.TagMultiselectWidget.prototype.getTagInfoFromInput=function(){var t=this.input.getValue();return{data:t,label:t}},g.ui.TagMultiselectWidget.prototype.addTagFromInput=function(){var t=this.getTagInfoFromInput();t.data&&this.addTag(t.data,t.label)&&this.clearInput()},g.ui.TagMultiselectWidget.prototype.clearInput=function(){this.input.setValue("")},g.ui.TagMultiselectWidget.prototype.isDuplicateData=function(t){return!!this.findItemFromData(t)},g.ui.TagMultiselectWidget.prototype.isAllowedData=function(e){return!(!this.allowDuplicates&&this.isDuplicateData(e)||!this.allowArbitrary&&!this.getAllowedValues().some(t=>e===t))},g.ui.TagMultiselectWidget.prototype.getAllowedValues=function(){return this.allowedValues},g.ui.TagMultiselectWidget.prototype.addAllowedValue=function(t){-1===this.allowedValues.indexOf(t)&&this.allowedValues.push(t)},g.ui.TagMultiselectWidget.prototype.getValue=function(){return this.getItems().filter(t=>t.isValid()).map(t=>t.getData())},g.ui.TagMultiselectWidget.prototype.setValue=function(t){t=Array.isArray(t)?t:[t],this.clearItems(),t.forEach(t=>{"object"==typeof t?this.addTag(t.data,t.label):this.addTag(String(t))})},g.ui.TagMultiselectWidget.prototype.addTag=function(e,i){var n=this.isAllowedData(e);if(this.isUnderLimit()&&(n||this.allowDisplayInvalidTags)){i=this.createTagItemWidget(e,i);i.toggleValid(n),i.toggleDraggable(this.allowReordering);let t=this.getItems().length;if(!this.allowReordering){var o=this.getAllowedValues().indexOf(e);if(-1!==o){t=0;for(var[s,u]of this.getItems().entries()){u=this.getAllowedValues().indexOf(u.getData());if(!(-1!==u&&u<=o))break;t=s+1}}}return this.addItems([i],t),!0}return!1},g.ui.TagMultiselectWidget.prototype.isUnderLimit=function(){return!this.tagLimit||this.getItemCount()<this.tagLimit},g.ui.TagMultiselectWidget.prototype.removeTagByData=function(t){t=this.findItemFromData(t);this.removeItems([t])},g.ui.TagMultiselectWidget.prototype.createTagItemWidget=function(t,e){return new g.ui.TagItemWidget({data:t,label:e||t})},g.ui.TagMultiselectWidget.prototype.getNextItem=function(t){var e=this.items.indexOf(t);return void 0===t||-1===e?this.items[0]:e===this.items.length-1?this.hasInput?this.input:this.items[0]:this.items[e+1]},g.ui.TagMultiselectWidget.prototype.getPreviousItem=function(t){var e=this.items.indexOf(t);return void 0===t||-1===e?this.items[this.items.length-1]:0===e?this.hasInput?this.input:this.items[this.items.length-1]:this.items[e-1]},g.ui.TagMultiselectWidget.prototype.updateInputSize=function(){if("inline"!==this.inputPosition||this.isDisabled())this.updateIfHeightChanged();else if(0!==this.input.$input[0].scrollWidth){this.input.$input.css("width","1em");var e=this.$group.children().last(),i=g.ui.Element.static.getDir(this.$handle),n=this.input.$input.attr("placeholder"),n=(void 0===this.contentWidthWithPlaceholder&&""===this.input.getValue()&&void 0!==n&&(this.input.$input.val(n),this.contentWidthWithPlaceholder=this.input.$input[0].scrollWidth,this.input.$input.val("")),Math.max(this.input.$input[0].scrollWidth,void 0===this.contentWidthWithPlaceholder?0:this.contentWidthWithPlaceholder)),t=this.input.$input.width();if(!(n<t)){let t;t=0===e.length?this.$content.innerWidth():"ltr"===i?this.$content.innerWidth()-e.position().left-e.outerWidth():e.position().left,n>(t-=13)&&(t=this.$content.innerWidth()-13),this.input.$input.width(Math.floor(t))}this.updateIfHeightChanged()}},g.ui.TagMultiselectWidget.prototype.updateIfHeightChanged=function(){var t=this.$element.height();t!==this.height&&(this.height=t,this.emit("resize"))},g.ui.TagMultiselectWidget.prototype.checkValidity=function(){return this.getItems().every(t=>t.isValid())},g.ui.TagMultiselectWidget.prototype.toggleValid=function(t){t=void 0===t?!this.valid:!!t,this.valid!==t&&(this.valid=t,this.setFlags({invalid:!this.valid}),this.emit("valid",this.valid))},g.ui.TagMultiselectWidget.prototype.isValid=function(){return this.valid},g.ui.PopupTagMultiselectWidget=function(t){var e,i={popup:{}};t=t||{},g.ui.PopupTagMultiselectWidget.super.call(this,Object.assign({inputPosition:"none"},t)),this.$overlay=(!0===t.$overlay?g.ui.getDefaultOverlay():t.$overlay)||this.$element,t.popup||(e=new g.ui.TextInputWidget,i.popupInput=e,i.popup.$content=e.$element,i.popup.padded=!0,this.$element.addClass("oo-ui-popupTagMultiselectWidget-defaultPopup")),i.popup.$overlay=this.$overlay,i.popup.$autoCloseIgnore=this.hasInput?this.input.$element.add(this.$overlay):this.$overlay,t=Object.assign(i,t),g.ui.mixin.PopupElement.call(this,t),this.hasInput&&this.input.$input.on("focus",this.popup.toggle.bind(this.popup,!0)),this.popupInput=t.popupInput,this.popupInput&&this.popupInput.connect(this,{enter:"onPopupInputEnter"}),this.on("resize",this.popup.updateDimensions.bind(this.popup)),this.popup.connect(this,{toggle:"onPopupToggle"}),this.$tabIndexed.on("focus",this.onFocus.bind(this)),this.$element.append(this.popup.$element).addClass("oo-ui-popupTagMultiselectWidget"),g.ui.warnDeprecation("PopupTagMultiselectWidget: Deprecated widget. Use MenuTagMultiselectWidget instead. See T208821.")},g.inheritClass(g.ui.PopupTagMultiselectWidget,g.ui.TagMultiselectWidget),g.mixinClass(g.ui.PopupTagMultiselectWidget,g.ui.mixin.PopupElement),g.ui.PopupTagMultiselectWidget.prototype.onFocus=function(){this.popup.toggle(!0)},g.ui.PopupTagMultiselectWidget.prototype.onPopupToggle=function(t){t&&this.popupInput&&this.popupInput.focus()},g.ui.PopupTagMultiselectWidget.prototype.onPopupInputEnter=function(){this.popupInput&&(this.addTagByPopupValue(this.popupInput.getValue()),this.popupInput.setValue(""))},g.ui.PopupTagMultiselectWidget.prototype.onTagSelect=function(t){this.popupInput&&this.allowEditTags?(this.popupInput.setValue(t.getData()),this.removeItems([t]),this.popup.toggle(!0),this.popupInput.focus()):g.ui.PopupTagMultiselectWidget.super.prototype.onTagSelect.call(this,t)},g.ui.PopupTagMultiselectWidget.prototype.addTagByPopupValue=function(t,e){this.addTag(t,e)},g.ui.MenuTagMultiselectWidget=function(t){let e=$([]),i=(t=t||{}).options||[];var n=t.selected||[],o=(i=i.concat(n.map(t=>"string"==typeof t?{data:t,label:t}:t)),g.copy(t));o.options=i,o.selected=n,g.ui.MenuTagMultiselectWidget.super.call(this,o),e=e.add(this.$group),this.hasInput&&(e=e.add(this.input.$element)),this.$overlay=(!0===t.$overlay?g.ui.getDefaultOverlay():t.$overlay)||this.$element,this.clearInputOnChoose=void 0===t.clearInputOnChoose||!!t.clearInputOnChoose,this.menu=this.createMenuWidget(Object.assign({widget:this,hideOnChoose:!1,input:this.hasInput?this.input:null,$input:this.hasInput?this.input.$input:null,filterFromInput:!!this.hasInput,highlightOnFilter:!this.allowArbitrary,multiselect:!0,$autoCloseIgnore:e,$floatableContainer:(this.hasInput&&"outline"===this.inputPosition?this.input:this).$element,$overlay:this.$overlay,disabled:this.isDisabled()},t.menu)),this.addOptions(i),this.menu.connect(this,{choose:"onMenuChoose",toggle:"onMenuToggle"}),this.hasInput&&this.input.connect(this,{change:"onInputChange"}),this.connect(this,{resize:"onResize"}),this.$overlay.append(this.menu.$element),this.$element.addClass("oo-ui-menuTagMultiselectWidget"),this.menu.$focusOwner.removeAttr("aria-expanded"),0<n.length&&this.setValue(n)},g.inheritClass(g.ui.MenuTagMultiselectWidget,g.ui.TagMultiselectWidget),g.ui.MenuTagMultiselectWidget.prototype.onResize=function(){this.menu.position()},g.ui.MenuTagMultiselectWidget.prototype.onInputFocus=function(){var t=this.isValid();g.ui.MenuTagMultiselectWidget.super.prototype.onInputFocus.call(this),this.isUnderLimit()&&(this.menu.toggle(!0),t||this.menu.highlightItem())},g.ui.MenuTagMultiselectWidget.prototype.onInputChange=function(){this.menu.toggle(!0)},g.ui.MenuTagMultiselectWidget.prototype.onMenuChoose=function(t,e){e&&!this.findItemFromData(t.getData())?this.addTag(t.getData(),t.getLabel()):this.removeTagByData(t.getData()),this.hasInput&&this.clearInputOnChoose&&this.input.setValue("")},g.ui.MenuTagMultiselectWidget.prototype.onMenuToggle=function(t){t||(this.menu.highlightItem(null),this.menu.scrollToTop()),setTimeout(()=>{this.menu.$focusOwner.removeAttr("aria-expanded")})},g.ui.MenuTagMultiselectWidget.prototype.onTagSelect=function(t){var e=this.menu.findItemFromData(t.getData());this.allowArbitrary?g.ui.MenuTagMultiselectWidget.super.prototype.onTagSelect.call(this,t):(this.hasInput&&this.menu.filterFromInput&&this.input.setValue(""),this.focus(),this.menu.highlightItem(e),this.menu.scrollItemIntoView(e))},g.ui.MenuTagMultiselectWidget.prototype.removeItems=function(t){g.ui.MenuTagMultiselectWidget.super.prototype.removeItems.call(this,t),t.forEach(t=>{t=this.menu.findItemFromData(t.getData());t&&this.menu.unselectItem(t)})},g.ui.MenuTagMultiselectWidget.prototype.setValue=function(t){t=Array.isArray(t)?t:[t],this.menu&&(this.clearItems(),t.forEach(t=>{let e,i;"string"==typeof t?e=i=t:(e=t.data,i=t.label);t=this.menu.getItemFromLabel(i)||this.menu.findItemFromData(e);t?(this.addTag(t.getData(),t.getLabel()),this.menu.selectItem(t)):this.allowArbitrary&&this.addTag(e,i)}))},g.ui.MenuTagMultiselectWidget.prototype.onChangeTags=function(){g.ui.MenuTagMultiselectWidget.super.prototype.onChangeTags.call(this),this.menu&&!this.isUnderLimit()&&this.menu.toggle(!1)},g.ui.MenuTagMultiselectWidget.prototype.setDisabled=function(t){g.ui.MenuTagMultiselectWidget.super.prototype.setDisabled.call(this,t),this.menu&&this.menu.setDisabled(t)},g.ui.MenuTagMultiselectWidget.prototype.initializeMenuSelection=function(){this.menu.highlightItem(this.allowArbitrary?null:this.menu.findFirstSelectableItem());var t=this.menu.findHighlightedItem();t&&this.menu.scrollItemIntoView(t)},g.ui.MenuTagMultiselectWidget.prototype.getTagInfoFromInput=function(){var t=this.input.getValue(),e=this.menu.findHighlightedItem()||this.menu.findItemFromData(t);return{data:e?e.getData():t,label:e?e.getLabel():t}},g.ui.MenuTagMultiselectWidget.prototype.createMenuWidget=function(t){return new g.ui.MenuSelectWidget(t)},g.ui.MenuTagMultiselectWidget.prototype.addOptions=function(t){const e=[],i=[];t.forEach(t=>{-1===e.indexOf(t.data)&&(e.push(t.data),i.push(this.createMenuOptionWidget(t.data,t.label,t.icon)))}),this.menu.addItems(i)},g.ui.MenuTagMultiselectWidget.prototype.createMenuOptionWidget=function(t,e,i){return new g.ui.MenuOptionWidget({data:t,label:e||t,icon:i})},g.ui.MenuTagMultiselectWidget.prototype.getMenu=function(){return this.menu},g.ui.MenuTagMultiselectWidget.prototype.getAllowedValues=function(){let t=[];return this.menu&&(t=this.menu.getItems().map(t=>t.getData())),this.allowedValues.concat(t)},g.ui.SearchWidget=function(t){g.ui.SearchWidget.super.call(this,t=t||{}),this.query=t.input||new g.ui.SearchInputWidget({placeholder:t.placeholder,value:t.value}),this.results=new g.ui.SelectWidget,this.results.setFocusOwner(this.query.$input),this.$query=$("<div>"),this.$results=$("<div>"),this.query.connect(this,{change:"onQueryChange",enter:"onQueryEnter"}),this.query.$input.on("keydown",this.onQueryKeydown.bind(this)),this.$query.addClass("oo-ui-searchWidget-query").append(this.query.$element),this.$results.addClass("oo-ui-searchWidget-results").append(this.results.$element),this.$element.addClass("oo-ui-searchWidget").append(this.$results,this.$query)},g.inheritClass(g.ui.SearchWidget,g.ui.Widget),g.ui.SearchWidget.prototype.onQueryKeydown=function(t){var e,t=t.which===g.ui.Keys.DOWN?1:t.which===g.ui.Keys.UP?-1:0;t&&(e=this.results.findHighlightedItem()||this.results.findSelectedItem(),e=this.results.findRelativeSelectableItem(e,t),this.results.highlightItem(e),e)&&e.scrollElementIntoView()},g.ui.SearchWidget.prototype.onQueryChange=function(){this.results.clearItems()},g.ui.SearchWidget.prototype.onQueryEnter=function(){var t=this.results.findHighlightedItem();t&&this.results.chooseItem(t)},g.ui.SearchWidget.prototype.getQuery=function(){return this.query},g.ui.SearchWidget.prototype.getResults=function(){return this.results}}(OO);
//# sourceMappingURL=oojs-ui-widgets.min.js.map